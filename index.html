<template>
	<view class="page-container safe-area-inset-bottom-bg" style="background-color: transparent;">
		<!-- ËÉåÊôØ‰ΩøÁî®Êõ¥ÁÆÄÊ¥ÅÁöÑËÆæËÆ° -->
		<view class="ios-background">
			<view class="ios-gradient-bg"></view>
		</view>
		
		<!-- Áä∂ÊÄÅÊ†è -->
		<view class="ios-status-bar"></view>
		
		<!-- È°µÈù¢ÂÜÖÂÆπÂå∫Âüü - ‰ΩøÁî®iOSÈ£éÊ†ºÁöÑÊªöÂä®ËßÜÂõæ -->
		<scroll-view 
			scroll-y="true" 
			class="ios-scroll-container" 
			@scroll="handleScroll"
			:scroll-with-animation="false"
			:enhanced="true"
			:bounces="true"
			:show-scrollbar="false"
			@scrolltolower="handleScrollToLower"
			:lower-threshold="150"
			:enable-flex="true"
			:enable-back-to-top="true"
			:fast-deceleration="true"
			:scroll-anchoring="true"
			:enable-passive="true">
			
			<!-- È°∂ÈÉ®ÂØºËà™Âå∫Âüü -->
			<view class="ios-nav-header">
				<view class="ios-header-left">
				</view>
			</view>
			
			<!-- ËØçÊ±áÂ±ïÁ§∫Âå∫ - iOSÂç°ÁâáÈ£éÊ†º -->
			<swiper 
				class="ios-word-swiper" 
				:indicator-dots="false" 
				:autoplay="false" 
				:circular="true"
				@change="handleSwiperChange"
				:previous-margin="'50rpx'"
				:next-margin="'50rpx'"
				:duration="300"
				:easing-function="'easeOutCubic'"
			>
				<swiper-item v-if="isLoading">
					<view class="ios-card ios-loading-card">
						<view class="ios-loading-indicator"></view>
						<text class="ios-loading-text">Âä†ËΩΩ‰∏≠...</text>
					</view>
				</swiper-item>
				
				<swiper-item v-for="(item, index) in displayWords" :key="index" v-else>
					<view class="ios-card" 
						  :class="{'ios-card-active': currentWordIndex === index}"
						  @click="playAudio">
						<view class="ios-card-content"
							:class="{'mongolian-card-content': currentLanguage === 'mongolian' || currentLanguage === 'manchu'}">
							<view class="ios-card-header">
								<text
									:class="{
										'ios-word-character': true,
										'vertical-mongolian': currentLanguage === 'mongolian' || currentLanguage === 'manchu',
										'ios-word-long': item.word && item.word.length > 8,
										'ios-word-very-long': item.word && item.word.length > 15
									}"
									:data-language="currentLanguage"
									:style="wordCharacterStyle">
									{{ item.word || 'ÂçïËØç' }}
								</text>
							</view>
							<view
								v-if="currentLanguage === 'mongolian' || currentLanguage === 'manchu'"
								class="vertical-mongolian-pinyin"
							>
								{{ (item.pinyin || '').replace(/ /g, '„ÄÄ') }}
							</view>
							<view v-else class="ios-word-pinyin-box">
								<text class="ios-word-pinyin">{{ item.pinyin || '' }}</text>
							</view>
							<view class="ios-word-meaning-box"
								:class="{'vertical-mongolian': currentLanguage === 'mongolian' || currentLanguage === 'manchu'}">
								<text
									:class="{
										'ios-word-meaning': true,
										'vertical-mongolian-chinese': currentLanguage === 'mongolian' || currentLanguage === 'manchu'
									}"
								>
									{{ truncateText(item.meaning || 'ÂçïËØçÈáä‰πâÂíå‰æãÂè•Â∞ÜÊòæÁ§∫Âú®ËøôÈáå') }}
								</text>
							</view>
							<!-- ËØ¶ÁªÜÊåâÈíÆÊîæÂú®Èáä‰πâ‰∏ãÊñπ -->
							<view class="detail-btn-container"
								@tap.stop="goToWordDetail(item)"
								:class="{'vertical-mongolian': currentLanguage === 'mongolian' || currentLanguage === 'manchu'}">
								<view class="detail-btn"
									:class="{'vertical-mongolian': currentLanguage === 'mongolian' || currentLanguage === 'manchu'}">
									<text class="detail-text">ËØ¶ÁªÜ</text>
								</view>
							</view>
						</view>
					</view>
				</swiper-item>
			</swiper>

			<!-- Âø´Êç∑ËèúÂçï - iOSÈ£éÊ†ºÁΩëÊ†º -->
			<view class="ios-menu-section">
				<view class="ios-section-header">
					<text class="ios-section-title">Âø´Êç∑ÂäüËÉΩ</text>
				</view>
				
				<view class="ios-grid">
					<view 
						v-for="(item, index) in menuItemsWithCharIcon" 
						:key="index"
						class="ios-grid-item"
						@click="tn(item.route)"
						:style="{'--index': index}"
					>
						<view class="ios-grid-icon-container">
							<image class="ios-grid-icon" :src="item.icon"></image>
						</view>
						<text class="ios-grid-label">{{ item.text }}</text>
					</view>
				</view>
			</view>
			
			<!-- ÊñáÁ´†ÈòÖËØªÂå∫Âüü -->
			<view class="article-section">
				<view class="section-header">
					<text class="section-title">ÊñáÁ´†ÈòÖËØª</text>
				</view>
				
				<view class="article-list">
					<view class="search-bar">
						<view class="search-input">
							<view class="search-icon">
								<image src="/static/chuangguang/search-circle-svgrepo-com.svg" mode="aspectFit"></image>
							</view>
							<input type="text" placeholder="ÊêúÁ¥¢ÊñáÁ´†" v-model="searchText" @input="handleSearch" />
							<view class="search-clear" v-if="searchText" @click="clearSearch"></view>
						</view>
					</view>
					
					<view v-if="isLoading" class="loading-state">
						<view class="loading-spinner"></view>
						<text>Âä†ËΩΩ‰∏≠...</text>
					</view>
					
					<view v-else-if="filteredArticles.length === 0" class="no-results">
						<view class="no-results-icon"></view>
						<text>ÊöÇÊó†Áõ∏ÂÖ≥ÊñáÁ´†</text>
					</view>
					
					<view v-else>
						<view 
							v-for="(article, index) in filteredArticles" 
							:key="article.id"
							class="article-item"
							@click="goToArticle(article.id)">
							
							<view class="article-avatar">
								<text>{{article.title.substring(0, 1)}}</text>
							</view>
							
							<view class="article-content">
								<text class="article-title">{{article.title}}</text>
								<text class="article-description">{{article.description}}</text>
								<view class="article-footer">
									<text class="article-author">{{article.author}}</text>
									<text class="article-date">{{article.date}}</text>
								</view>
							</view>
						</view>
					</view>
				</view>
			</view>
			
			<!-- Â∫ïÈÉ®Âä†ËΩΩÂå∫Âüü -->
			<view class="ios-load-more" v-if="hasMoreData">
				<view class="ios-loading-dots" v-if="isPulling">
					<view class="ios-loading-dot"></view>
					<view class="ios-loading-dot"></view>
					<view class="ios-loading-dot"></view>
				</view>
				<text class="ios-load-text">{{ isPulling ? 'Âä†ËΩΩ‰∏≠...' : '‰∏äÊãâÂä†ËΩΩÊõ¥Â§ö' }}</text>
			</view>
			
			<view class="ios-no-more-data" v-else>
				<text>‚Äî Â∑≤ÁªèÂà∞Â∫ï‰∫Ü ‚Äî</text>
			</view>
			
			<!-- Â∫ïÈÉ®ÂÆâÂÖ®Âå∫Âüü -->
			<view class="ios-safe-area-bottom"></view>
		</scroll-view>

		<!-- ËøîÂõûÈ°∂ÈÉ®ÊåâÈíÆ - iOSÈ£éÊ†º -->
		<view class="ios-back-to-top" :class="{'ios-visible': showBackToTop}" @click="scrollToTop">
			<view class="ios-back-to-top-icon"></view>
		</view>
	</view>
</template>

<script>
	import template_page_mixin from '@/libs/mixin/template_page_mixin.js'
	import NavIndexButton from '@/libs/components/nav-index-button.vue'
	import dynamicDemoTemplate from '@/libs/components/dynamic-demo-template.vue'
	import tool from '@/utils/common.js';
	// import {
	// 	getDictByCode
	// } from '@/apis/dict';
	export default {
		name: 'TemplateCourse',
		mixins: [template_page_mixin],
		components: {
			NavIndexButton,
			dynamicDemoTemplate
		},
		data() {
			return {
				tips: ['ÊØèÂ§©‰∏ÄÊµã', 'ÊéåÊè°ÊúÄÊñ∞ÊàêÁª©'],
				isPlaying: false,
				currentWordIndex: 0,
				
				// Á§∫‰æãÂçïËØçÊï∞ÊçÆ
				displayWords: [],
				allWords: [], // Â≠òÂÇ®ÊâÄÊúâÂçïËØç
				pageSize: 20, // ÊØèÈ°µÊòæÁ§∫ÁöÑÂçïËØçÊï∞
				currentPage: 0, // ÂΩìÂâçÈ°µÁ†Å
				isLoadingMore: false, // ÊòØÂê¶Ê≠£Âú®Âä†ËΩΩÊõ¥Â§ö
				audioContext: null,
				currentAudio: null,
				isLoading: true,
				vocabUrl: '',
				currentLanguage: uni.getStorageSync('currentLanguage') || 'nushu', // ÂàùÂßãÂåñÊó∂‰ªéÂ≠òÂÇ®‰∏≠Ëé∑ÂèñËØ≠Ë®ÄËÆæÁΩÆ
				
				// ËèúÂçïÈ°π
				menuItems: [
					{
						text: 'ËØ≠Ë®Ä',
						icon: '../../static/chuangguang/language-svgrepo-com.svg',
						route: '/pages/index/language'
					},
					{
						text: 'Â≠óÂÖ∏',
						icon: '../../static/icon/dictionary-2-svgrepo-com.svg',
						route: '/pages/dict/search'
					},
					{
						text: 'ÁøªËØë',
						icon: '../../static/icon/translate-svgrepo-com (1).svg',
						route: '/pages/translate/index'
					},
					{
						text: 'Èü≥‰πê',
						icon: '../../static/icon/sound-svgrepo-com.svg',
						route: '/pages/song/list'
					},
					{
						text: 'Â≠óÁ¨¶',
						icon: '', // Áî®computedÂä®ÊÄÅËµãÂÄº
						route: '/pages/memo/index'
					},
					{
						text: 'ËæìÂÖ•',
						icon: '../../static/icon/keyboard-shortcuts-svgrepo-com.svg',
						route: '/pages/enter/index'
					},
					{
						text: 'Êõ¥Â§ö',
						icon: '../../static/icon/more-filled-svgrepo-com.svg',
						route: '/pages/level/list'
					}
				],
				
				articles: [], // ÊõøÊç¢Êú¨Âú∞ÊñáÁ´†Êï∞ÊçÆ‰∏∫Á©∫Êï∞ÁªÑ
				scrolled: false,
				showBackToTop: false,
				scrollTop: 0,
				lastScrollTime: 0,
				scrollThrottling: false,
				scrollTimeout: null,
				animatedItems: [],
				isScrolling: false,
				isSmallScreen: false,
				isPulling: false,
				pullLoading: false,
				hasMoreData: true,
				elasticPulling: false,
				maxElasticDistance: 0,
				touchStartY: 0,
				elasticHeight: 0,
				touchMoveY: 0,
				initialScrollTop: 0,
				maxOverScroll: 150,
				isElasticAnimating: false,
				isLoggedIn: false,
				userInfo: {},
				useReducedMotion: false,
				scrollTimeoutId: null,
				currentFont: 'Nushu', // ÈªòËÆ§Â≠ó‰Ωì
				userId: '', // Ê∑ªÂä†Áî®Êà∑IDÂ≠óÊÆµ
				searchText: '',
				selectedCategory: 'all',
				categories: [
					{ id: 'all', name: 'ÂÖ®ÈÉ®' },
					{ id: 'history', name: 'ÂéÜÂè≤ÊñáÂåñ' },
					{ id: 'language', name: 'ËØ≠Ë®ÄÁ†îÁ©∂' },
					{ id: 'modern', name: 'Áé∞‰ª£‰º†Êâø' },
					{ id: 'society', name: 'Á§æ‰ºöÂΩ±Âìç' }
				],
			}
		},
		computed: {
			currentLanguageIcon() {
				return '../../static/chuangguang/language-svgrepo-com.svg';
			},
			wordCharacterStyle() {
				return {
					fontFamily: this.currentLanguage === 'nushu' ? 'Nushu' : 
								this.currentLanguage === 'hannom' ? 'Hannom' : 
								this.currentLanguage === 'yiwen' ? 'Yiwen' : 
								this.currentLanguage === 'mongolian' ? 'Mengguwen' :
								this.currentLanguage === 'manchu' ? 'system-ui' : 'Diannanguyiwen'
				}
			},
			charIcon() {
				if (this.currentLanguage === 'hannom') {
					return '../../static/chuangguang/hannom logo.svg';
				} else if (this.currentLanguage === 'yiwen') {
					return '../../static/chuangguang/yiwen.svg';
				} else if (this.currentLanguage === 'diannanguyiwen') {
					return '../../static/chuangguang/diannanyiwen.svg';
				} else if (this.currentLanguage === 'mongolian') {
					return '../../static/chuangguang/mengguwen.svg';
				} else if (this.currentLanguage === 'manchu') {
					return '../../static/chuangguang/manchu.svg';
				} else {
					return '../../static/icon/nvshu.svg';
				}
			},
			menuItemsWithCharIcon() {
				// ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ menuItemsÔºåÂ≠óÁ¨¶ÊåâÈíÆÁöÑiconÂä®ÊÄÅËµãÂÄº
				return this.menuItems.map(item => {
					if (item.text === 'Â≠óÁ¨¶') {
						return { ...item, icon: this.charIcon };
					}
					return item;
				});
			},
			filteredArticles() {
				let result = this.articles;
				
				// Ê†πÊçÆÂàÜÁ±ªÁ≠õÈÄâ
				if (this.selectedCategory !== 'all') {
					result = result.filter(article => article.categoryId === this.selectedCategory);
				}
				
				// Ê†πÊçÆÊêúÁ¥¢ÂÖ≥ÈîÆËØçÁ≠õÈÄâ
				if (this.searchText) {
					const keyword = this.searchText.toLowerCase();
					result = result.filter(article => 
						article.title.toLowerCase().includes(keyword) || 
						article.description.toLowerCase().includes(keyword) ||
						article.author.toLowerCase().includes(keyword)
					);
				}
				
				return result;
			}
		},
		watch: {
			currentLanguage: {
				immediate: true,
				handler(newLang) {
					// Ê†πÊçÆËØ≠Ë®ÄËÆæÁΩÆÂ≠ó‰Ωì
					this.currentFont = newLang === 'nushu' ? 'Nushu' : newLang === 'hannom' ? 'Hannom' : newLang === 'yiwen' ? 'Yiwen' : 'Diannanguyiwen';
					// Êõ¥Êñ∞ËØçÊ±áURL
					this.updateVocabUrl();
					// ÈáçÊñ∞Ëé∑ÂèñÊñáÁ´†Êï∞ÊçÆ
					this.fetchArticles();
				}
			}
		},
		onReady() {
			// ÁßªÈô§ÂºπÂπïÂàùÂßãÂåñ
		},
		onLoad() {
			// Ëé∑ÂèñÁî®Êà∑IDÂíåËØ≠Ë®ÄËÆæÁΩÆ
			const userInfo = uni.getStorageSync('userInfo');
			if (userInfo && userInfo.id) {
				this.userId = userInfo.id;
				// ‰ªéÊúçÂä°Âô®Ëé∑ÂèñËØ≠Ë®ÄËÆæÁΩÆ
				this.getLanguagePreference();
			} else {
				// Â¶ÇÊûúÊú™ÁôªÂΩïÔºå‰ªéÊú¨Âú∞Â≠òÂÇ®Ëé∑ÂèñÂΩìÂâçËØ≠Ë®ÄËÆæÁΩÆ
				const savedLanguage = uni.getStorageSync('currentLanguage');
				if (savedLanguage) {
					this.currentLanguage = savedLanguage;
				}
				// Á°Æ‰øùÂàùÂßãÂåñËØçÊ±áURL
				this.updateVocabUrl();
			}
			
			// ÁõëÂê¨ËØ≠Ë®ÄÂèòÂåñ
			uni.$on('languageChanged', this.handleLanguageChange);
			
			// ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñá
			this.audioContext = uni.createInnerAudioContext();
			this.audioContext.onEnded(() => {
				this.isPlaying = false;
			});
			this.audioContext.onPlay(() => {
				this.isPlaying = true;
			});
			this.audioContext.onError(() => {
				this.isPlaying = false;
				uni.showToast({
					title: 'Èü≥È¢ëÊí≠ÊîæÂ§±Ë¥•',
					icon: 'none'
				});
			});
			
			// Ëé∑ÂèñËØçÊ±áÊï∞ÊçÆ
			this.fetchVocabData();
			
			// Ëé∑ÂèñÊñáÁ´†Êï∞ÊçÆ
			this.fetchArticles();
			
			// È¢ÑÂä†ËΩΩÂ≠ó‰Ωì
			this.preloadFont();
			
			// Ëé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØÔºåÂà§Êñ≠Â∞èÂ±èÂπïËÆæÂ§á
			try {
				const sysInfo = uni.getSystemInfoSync();
				// Âà§Êñ≠ÊòØÂê¶‰∏∫Â∞èÂ±èÂπïËÆæÂ§á (È´òÂ∫¶Â∞è‰∫é600pxÂ∑¶Âè≥ÁöÑËÆæÂ§á)
				if (sysInfo.windowHeight < 600) {
					this.isSmallScreen = true;
					// Â∞èÂ±èÂπïËÆæÂ§áÁâπÊÆäÂ§ÑÁêÜ
					this.adjustForSmallScreen();
				}
				
				// Ê£ÄÊµãÊòØÂê¶ÈúÄË¶ÅÂáèÂ∞ëÂä®Áîª
				if (sysInfo.platform === 'android' && sysInfo.system && parseInt(sysInfo.system) < 8) {
					this.useReducedMotion = true;
				}
				
				// Â¶ÇÊûúÊòØ‰ΩéÂÜÖÂ≠òËÆæÂ§áÔºå‰πüÂáèÂ∞ëÂä®Áîª
				if (sysInfo.benchmarkLevel < 30) {
					this.useReducedMotion = true;
				}
			} catch (e) {
				// ÈîôËØØÂ§ÑÁêÜ
			}
			
			// ÈíàÂØπÊÄßËÉΩ‰ºòÂåñËøõË°åÂàùÂßãÂåñ
			this.initPerformanceOptimizations();
		},
		onUnload() {
			// Ê∏ÖÁêÜÈü≥È¢ëËµÑÊ∫ê
			if (this.audioContext) {
				this.audioContext.destroy();
			}
			
			// Ê∏ÖÁêÜËÆ°Êó∂Âô®
			clearTimeout(this.scrollEndTimeout);
			
			// Ê∏ÖÁêÜÊ®°ÊãüRAF
			if (this.scrollTimeoutId) {
				this.clearSimulateRAF(this.scrollTimeoutId);
			}
			
			// ÁßªÈô§ËØ≠Ë®ÄÂèòÂåñÁõëÂê¨
			uni.$off('languageChanged', this.handleLanguageChange);
		},
		onShow() {
			// Ê£ÄÊü•Âπ∂Êõ¥Êñ∞ÁôªÂΩïÁä∂ÊÄÅ
			const userInfo = uni.getStorageSync('userInfo');
			if (userInfo && userInfo.id) {
				this.isLoggedIn = true;
				this.userInfo = userInfo;
			} else {
				this.isLoggedIn = false;
			}
			
			// Ê£ÄÊü•ËØ≠Ë®ÄÊòØÂê¶ÊîπÂèò
			const savedLanguage = uni.getStorageSync('currentLanguage');
			if (savedLanguage && savedLanguage !== this.currentLanguage) {
				this.handleLanguageChange(savedLanguage);
			}
		},
		methods: {
			// Ëé∑ÂèñËØ≠Ë®ÄÂÅèÂ•ΩËÆæÁΩÆ
			async getLanguagePreference() {
				if (!this.userId) return;
				
				try {
					const result = await uniCloud.callFunction({
						name: 'userService',
						data: {
							action: 'getLanguagePreference',
							userId: this.userId
						}
					});
					
					if (result.result && result.result.code === 0) {
						const language = result.result.data.languagePreference;
						
						if (language) {
							this.currentLanguage = language;
							// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
							uni.setStorageSync('currentLanguage', language);
							// Âº∫Âà∂Êõ¥Êñ∞Â≠ó‰ΩìÂíåËØçÊ±áURL
							this.currentFont = language === 'nushu' ? 'Nushu' : language === 'hannom' ? 'Hannom' : language === 'yiwen' ? 'Yiwen' : 'Diannanguyiwen';
							this.updateVocabUrl();
							// ÈáçÊñ∞Ëé∑ÂèñËØçÊ±áÊï∞ÊçÆ
							this.fetchVocabData();
						}
					}
				} catch (error) {
					// Â¶ÇÊûúËé∑ÂèñÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Â≠òÂÇ®ÁöÑËØ≠Ë®ÄËÆæÁΩÆ
					const savedLanguage = uni.getStorageSync('currentLanguage');
					if (savedLanguage) {
						this.currentLanguage = savedLanguage;
						this.updateVocabUrl();
						this.fetchVocabData();
					}
				}
			},
			// Â§ÑÁêÜÊªëÂä®ÂàáÊç¢‰∫ã‰ª∂
			handleSwiperChange(e) {
				this.currentWordIndex = e.detail.current;
				// È¢ÑÂä†ËΩΩ‰∏ã‰∏Ä‰∏™ÂçïËØç
				this.preloadNextWord();
				
				// ÂΩìÊªëÂä®Âà∞ÂÄíÊï∞Á¨¨‰∏â‰∏™ÂçïËØçÊó∂ÔºåÂä†ËΩΩÊõ¥Â§ö
				if (this.currentWordIndex >= this.displayWords.length - 3) {
					this.loadNextPage();
				}
			},
			
			// Ëé∑ÂèñÂ•≥‰π¶ËØçÊ±áÊï∞ÊçÆ
			fetchVocabData() {
				if (!this.vocabUrl) {
					console.log('No vocab URL available');
					return;
				}
				
				console.log('Fetching vocab data for language:', this.currentLanguage);
				this.isLoading = true;
				
				// ÈáçÁΩÆÊï∞ÊçÆ
				this.displayWords = [];
				this.allWords = [];
				this.currentPage = 0;
				this.currentWordIndex = 0;
				
				uni.request({
					url: this.vocabUrl,
					success: (res) => {
						console.log('Vocab data received:', res.statusCode);
						if (res.statusCode === 200 && res.data && Array.isArray(res.data)) {
							// ÊØèÊ¨°Ëé∑ÂèñÊï∞ÊçÆÊó∂ÈÉΩÈáçÊñ∞Êâì‰π±
							const shuffledData = this.shuffleArray([...res.data]);
							
							// Â≠òÂÇ®ÊâÄÊúâÂçïËØçÊï∞ÊçÆ
							if (this.currentLanguage === 'manchu') {
								this.allWords = shuffledData.map(item => ({
									word: item.manchu || '',
									pinyin: item.transcription || '',
									meaning: item['Definition 1'] || '',
									partOfSpeech: item['Part of Speech'] || '',
									fullData: { ...item }
								}));
							} else if (this.currentLanguage === 'mongolian') {
								this.allWords = shuffledData.map(item => ({
									word: item.ËíôÂè§Êñá || '',
									pinyin: item.ËΩ¨ÂÜô || '',
									meaning: item.Èáä‰πâ1 || '',
									audio: '',
									fullData: { ...item }
								}));
							} else if (this.currentLanguage === 'nushu') {
								this.allWords = shuffledData.map(item => ({
									word: item.wordData || '',
									pinyin: item.phonetic || '',
									meaning: item.dialect || '',
									audio: '',
									fullData: { ...item }
								}));
							} else if (this.currentLanguage === 'yiwen') {
								this.allWords = shuffledData.map(item => ({
									word: item.wordData || '',
									pinyin: item.phonetic || '',
									meaning: item.dialect || '',
									audio: '',
									fullData: { ...item }
								}));
							} else if (this.currentLanguage === 'diannanguyiwen') {
								this.allWords = shuffledData.map(item => ({
									word: item.wordData || '',
									pinyin: item.phonetic || '',
									meaning: item.mandarin || '',
									audio: '',
									fullData: { ...item }
								}));
							} else if (this.currentLanguage === 'hannom') {
								this.allWords = shuffledData.map(item => ({
									word: item.character || '',
									pinyin: item.pinyin || '',
									meaning: item.meaning || '',
									audio: '',
									fullData: { ...item }
								}));
							}
							
							// Âä†ËΩΩÁ¨¨‰∏ÄÈ°µÊï∞ÊçÆ
							this.loadNextPage();
						} else {
							console.log('Invalid vocab data received');
							this.loadFallbackData();
						}
					},
					fail: (err) => {
						console.error('Failed to fetch vocab data:', err);
						this.loadFallbackData();
					},
					complete: () => {
						this.isLoading = false;
					}
				});
			},
			
			// Âä†ËΩΩ‰∏ã‰∏ÄÈ°µÊï∞ÊçÆ
			loadNextPage() {
				if (this.isLoadingMore) return;
				
				this.isLoadingMore = true;
				
				const start = this.currentPage * this.pageSize;
				const end = start + this.pageSize;
				const newWords = this.allWords.slice(start, end);
				
				if (newWords.length > 0) {
					this.displayWords = [...this.displayWords, ...newWords];
					this.currentPage++;
				}
				
				this.isLoadingMore = false;
			},
			
			// Ê∑ªÂä†È¢ÑÂä†ËΩΩÊñπÊ≥ï
			preloadNextWord() {
				const nextIndex = (this.currentWordIndex + 1) % this.displayWords.length;
				const nextWord = this.displayWords[nextIndex];
				if (nextWord) {
					// È¢ÑÂä†ËΩΩ‰∏ã‰∏Ä‰∏™ÂçïËØçÁöÑÂ≠ó‰Ωì
					this.preloadWordFont(nextWord.word);
				}
			},
			
			// ‰ºòÂåñÂ≠ó‰ΩìÈ¢ÑÂä†ËΩΩ
			preloadWordFont(word) {
				if (!word) return;
				// #ifdef H5
				setTimeout(() => {
					const tempElement = document.createElement('div');
					tempElement.style.fontFamily = this.currentFont;
					tempElement.style.position = 'absolute';
					tempElement.style.visibility = 'hidden';
					tempElement.textContent = word;
					document.body.appendChild(tempElement);
					// Âº∫Âà∂ÈáçÊéí‰ª•Ëß¶ÂèëÂ≠ó‰ΩìÂä†ËΩΩ
					tempElement.offsetHeight;
					// Ê∏ÖÁêÜ‰∏¥Êó∂ÂÖÉÁ¥†
					document.body.removeChild(tempElement);
				}, 0);
				// #endif
			},
			
			// ‰ºòÂåñÊï∞ÁªÑÈöèÊú∫Êâì‰π±ÊñπÊ≥ï
			shuffleArray(array) {
				const result = [...array];
				for (let i = result.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[result[i], result[j]] = [result[j], result[i]];
				}
				return result;
			},
			
			// Êí≠ÊîæÈü≥È¢ë
			playAudio() {
				if (this.isPlaying) {
					this.audioContext.stop();
					this.isPlaying = false;
					return;
				}
				
				const currentWord = this.displayWords[this.currentWordIndex];
				if (!currentWord || !currentWord.audio) {
					uni.showToast({
						title: 'Êó†Èü≥È¢ëÊï∞ÊçÆ',
						icon: 'none'
					});
					return;
				}
				
				try {
					this.audioContext.src = currentWord.audio;
					this.audioContext.play();
				} catch (e) {
					uni.showToast({
						title: 'Êí≠ÊîæÈü≥È¢ëÂá∫Èîô',
						icon: 'none'
					});
					this.isPlaying = false;
				}
			},
			
			// È°µÈù¢Ë∑≥ËΩ¨
			tn(url) {
				if (!url) return;
				
				if (url === '/pages/index/language') {
					// ÁâπÊÆäÂ§ÑÁêÜËØ≠Ë®ÄÂàáÊç¢È°µÈù¢
					uni.navigateTo({
						url: url,
						events: {
								languageChanged: (language) => {
									this.handleLanguageChange(language);
								}
							}
					});
				} else {
					uni.navigateTo({
						url: url,
						fail: (err) => {
							console.error("È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•:", err);
							uni.showToast({
								title: 'È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•',
								icon: 'none'
							});
						}
					});
				}
			},
			
			// È¢ÑÂä†ËΩΩÂ≠ó‰Ωì
			preloadFont() {
				const fontPath = this.currentLanguage === 'nushu' 
					? '../../static/fonts/Nushu.ttf'
					: this.currentLanguage === 'hannom'
					? '../../static/fonts/NOMNATONG-REGULAR.TTF'
					: this.currentLanguage === 'yiwen'
					? '../../static/fonts/Yiwen.ttf'
					: '../../static/fonts/diannanguyiwen.ttf';
					
				// ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂ÁöÑÊñáÊú¨Êù•Ëß¶ÂèëÂ≠ó‰ΩìÂä†ËΩΩ
				const tempText = this.currentLanguage === 'nushu' ? 'õâãõÖ∫õáØõÖª' : this.currentLanguage === 'hannom' ? 'Ê∏¨Ë©¶' : this.currentLanguage === 'yiwen' ? 'Â∂∑Êñá' : 'ÂΩùÊñá';
				
				// Âº∫Âà∂Êõ¥Êñ∞Â≠ó‰Ωì
				this.currentFont = this.currentLanguage === 'nushu' ? 'Nushu' : this.currentLanguage === 'hannom' ? 'Hannom' : this.currentLanguage === 'yiwen' ? 'Yiwen' : 'Diannanguyiwen';
				
				setTimeout(() => {
				}, 2000);
			},
			handleScroll(e) {
				// ‰ΩøÁî®ËäÇÊµÅÂ§ÑÁêÜÊªöÂä®‰∫ã‰ª∂
				if (this.scrollThrottling) return;
				this.scrollThrottling = true;
				
				setTimeout(() => {
					const scrollTop = e.detail.scrollTop;
					this.scrollTop = scrollTop;
					
					// ÁÆÄÂåñËøîÂõûÈ°∂ÈÉ®ÊåâÈíÆÁöÑÊòæÁ§∫ÈÄªËæë
					this.showBackToTop = this.isSmallScreen ? (scrollTop > 150) : (scrollTop > 300);
					
					this.scrollThrottling = false;
				}, 16); // Á∫¶60fps
			},
			updateScrollState(scrollTop) {
				// ÊéßÂà∂È°∂ÈÉ®ÊåáÁ§∫Âô®ÊòæÁ§∫
				if (scrollTop > 50 && !this.scrolled) {
					this.scrolled = true;
				} else if (scrollTop <= 50 && this.scrolled) {
					this.scrolled = false;
				}
				
				// ÊªöÂä®Êó∂Âä®ÊÄÅÂä†ËΩΩ/ÊòæÁ§∫ÂÖÉÁ¥†
				this.checkVisibleElements();
			},
			checkVisibleElements() {
				// Ëøô‰∏™ÊñπÊ≥ïÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠‰ºöÊ£ÄÊµãÂÖÉÁ¥†ÊòØÂê¶ËøõÂÖ•ËßÜÂè£
				// Áî±‰∫éÂ∞èÁ®ãÂ∫èÁéØÂ¢ÉÈôêÂà∂ÔºåËøôÈáå‰ΩøÁî®ÁÆÄÂåñÁöÑÂÆûÁé∞
				const offset = this.scrollTop + uni.getSystemInfoSync().windowHeight;
				
				// Âä®ÊÄÅÊ∑ªÂä†ÂÖÉÁ¥†ÁöÑÊòæÁ§∫Á±ª
				this.animatedItems.forEach(item => {
					if (!item.animated && offset > item.offsetTop) {
						// Ê†áËÆ∞ÂÖÉÁ¥†Â∑≤Âä®Áîª
						item.animated = true;
						// Ê∑ªÂä†Âä®ÁîªÁ±ª
					}
				});
			},
			scrollToTop() {
				uni.pageScrollTo({
					scrollTop: 0,
					duration: 0 // Á´ãÂç≥ÊªöÂä®Ôºå‰∏ç‰ΩøÁî®Âä®Áîª
				});
			},
			// ÈíàÂØπÂ∞èÂ±èÂπïËÆæÂ§áÁöÑÁâπÊÆäÂ§ÑÁêÜ
			adjustForSmallScreen() {
				// ÂáèÂ∞ëÈ¶ñÈ°µÂ±ïÁ§∫ÁöÑÊé®ËçêÈ°πÊï∞Èáè
				if (this.articles.length > 2) {
					this.articles = this.articles.slice(0, 2);
				}
				
				// Ë∞ÉÊï¥ÂçïËØçÂç°ÁâáÈ´òÂ∫¶
				const wordSwiper = document.querySelector('.ios-word-swiper');
				if (wordSwiper) {
					wordSwiper.style.height = '30vh'; // ÂáèÂ∞èÂçïËØçÂç°ÁâáÈ´òÂ∫¶
				}
			},
			handleScrollToLower() {
				if (this.pullLoading || !this.hasMoreData) return;
				
				this.isPulling = true;
				this.pullLoading = true;
				
				// ‰ΩøÁî® setTimeout Êõø‰ª£ requestAnimationFrame
				setTimeout(() => {
					setTimeout(() => {
						this.hasMoreData = false;
						this.isPulling = false;
						this.pullLoading = false;
					}, 1200);
				}, 16);
			},
			// Â§ÑÁêÜÂºπÊÄß‰∏äÊãâÊïàÊûú
			onTouchStart(e) {
				// Âè™ËÆ∞ÂΩïÂàùÂßãËß¶Êë∏‰ΩçÁΩÆ
				this.touchStartY = e.touches[0].clientY;
				this.initialScrollTop = this.scrollTop;
				this.elasticPulling = false;
				this.elasticHeight = 0;
				this.isElasticAnimating = false;
			},
			
			onTouchMove(e) {
				// ËÆ∞ÂΩïÂΩìÂâçËß¶Êë∏‰ΩçÁΩÆ
				this.touchMoveY = e.touches[0].clientY;
				
				// ËÆ°ÁÆóÊãñÂä®Ë∑ùÁ¶ª
				const deltaY = this.touchStartY - this.touchMoveY;
				
				// ‰ªÖÂú®ÊªöÂä®Âà∞Â∫ïÈÉ®Âπ∂‰∏îÊòØ‰∏äÊãâÊìç‰ΩúÊó∂Â∫îÁî®ÂºπÊÄßÊïàÊûú
				if (this.scrolledToBottom && deltaY > 0) {
					const damping = 0.3;
					this.elasticHeight = Math.min(
						this.maxOverScroll, 
						Math.pow(deltaY * damping, 0.8)
					);
					this.elasticPulling = true;
				}
			},
			
			onTouchEnd() {
				if (this.elasticPulling) {
					// ËÆæÁΩÆÂõûÂºπÂä®Áîª
					this.isElasticAnimating = true;
					
					// Â¶ÇÊûúÊãâ‰º∏Ë∂≥Â§üÔºåËß¶ÂèëÂä†ËΩΩ
					if (this.elasticHeight > 60) {
						// ‰øùÊåÅ‰∏ÄÊÆµÊó∂Èó¥ÁöÑÊãâ‰º∏ÊïàÊûúÔºåÁÑ∂ÂêéÂõûÂºπ
						setTimeout(() => {
							this.handleScrollToLower();
							this.elasticSnapBack();
						}, 200);
					} else {
						// Á´ãÂç≥ÂõûÂºπ
						this.elasticSnapBack();
					}
				}
			},
			
			// ÂõûÂºπÂä®Áîª
			elasticSnapBack() {
				// Ê®°ÊãüÂºπÊÄßÂõûÂºπÂä®Áîª
				const frames = 20; // Âä®ÁîªÂ∏ßÊï∞
				const duration = 300; // ÊÄªÊåÅÁª≠Êó∂Èó¥ÔºàÊØ´ÁßíÔºâ
				const frameTime = duration / frames;
				const startHeight = this.elasticHeight;
				let currentFrame = 0;
				
				const animateBack = () => {
					currentFrame++;
					// ‰ΩøÁî®easeOutElasticÁºìÂä®ÂáΩÊï∞
					const progress = this.easeOutElastic(currentFrame / frames);
					this.elasticHeight = startHeight * (1 - progress);
					
					if (currentFrame < frames) {
						setTimeout(animateBack, frameTime);
					} else {
						this.elasticHeight = 0;
						this.elasticPulling = false;
						this.isElasticAnimating = false;
					}
				};
				
				animateBack();
			},
			
			// ÂºπÊÄßÁºìÂä®ÂáΩÊï∞
			easeOutElastic(t) {
				const p = 0.3;
				return Math.pow(2, -10 * t) * Math.sin((t - p / 4) * (2 * Math.PI) / p) + 1;
			},
			// Êñ∞Â¢ûÔºöÊªöÂä®Êó∂ÂáèÂ∞ëÂä®ÁîªÊïàÊûú
			reduceAnimationsWhileScrolling() {
				// ÊªöÂä®Êó∂‰∏¥Êó∂ÊöÇÂÅúÂºπÂπïÂä®ÁîªÊõ¥Êñ∞
				this.pauseDanmakuCreation = true;
			},
			// Êñ∞Â¢ûÔºöÊÅ¢Â§çÂä®ÁîªÊïàÊûú
			restoreAnimations() {
				// ÊªöÂä®ÁªìÊùüÂêéÊÅ¢Â§çÂºπÂπïÂàõÂª∫
				this.pauseDanmakuCreation = false;
			},
			// Êñ∞Â¢ûÊÄßËÉΩ‰ºòÂåñÂàùÂßãÂåñÊñπÊ≥ï
			initPerformanceOptimizations() {
				// Ê†πÊçÆËÆæÂ§áÊÄßËÉΩË∞ÉÊï¥Âä®ÁîªÂíåÊïàÊûú
				if (this.useReducedMotion) {
					// ÂáèÂ∞ëÂºπÂπïÊï∞Èáè
					this.danmakuTexts = this.danmakuTexts.slice(0, 10);
					
					// ËÆæÁΩÆCSSÂèòÈáè‰ª•ÂáèÂ∞ëÂä®ÁîªÊïàÊûú
					document.documentElement.style.setProperty('--reduced-motion', 'true');
				}
			},
			// ‰øÆÊîπÊ®°Êãü requestAnimationFrame ÁöÑÂ∑•ÂÖ∑ÊñπÊ≥ï
			simulateRAF(callback) {
				return setTimeout(() => {
					callback();
				}, 16); // Á∫¶60fps
			},
			// Ê∏ÖÁêÜÊñπÊ≥ï‰øùÊåÅ‰∏çÂèò
			clearSimulateRAF(id) {
				clearTimeout(id);
			},
			
			// Êü•ÁúãÂÖ®ÈÉ®ÊñáÁ´†
			viewAllArticles() {
				uni.navigateTo({
					url: '/pages/read/index',
					fail: (err) => {
						console.error("Ë∑≥ËΩ¨ÊñáÁ´†ÂàóË°®È°µÈù¢Â§±Ë¥•:", err);
						uni.showToast({
							title: 'È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•',
							icon: 'none'
						});
					}
				});
			},
			
			// Ë∑≥ËΩ¨Âà∞ÊñáÁ´†ÈòÖËØªÈ°µÈù¢
			goToReadPage() {
				uni.navigateTo({
					url: '/pages/read/index',
					fail: (err) => {
						console.error("Ë∑≥ËΩ¨ÊñáÁ´†ÂàóË°®È°µÈù¢Â§±Ë¥•:", err);
						uni.showToast({
							title: 'È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•',
							icon: 'none'
						});
					}
				});
			},
			
			// Ë∑≥ËΩ¨Âà∞ËØ≠Ë®ÄÈÄâÊã©È°µÈù¢
			goToLanguagePage() {
				uni.navigateTo({
					url: '/pages/index/language',
					events: {
						languageChanged: (language) => {
							this.handleLanguageChange(language);
						}
					}
				});
			},
			
			// Êõ¥Êñ∞ËØçÊ±áURL
			updateVocabUrl() {
				this.vocabUrl = this.currentLanguage === 'nushu'
					? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Â•≥‰π¶ËØçÊ±áÈü≥È¢ëÊñá‰ª∂/nvshuword.json'
					: this.currentLanguage === 'hannom'
					? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Ê±âÂñÉÂ≠óË∂äÂçóËØ≠Â≠¶‰π†/Ê±âÂñÉËØçÊù°Â§ßÂÖ®/Hannom.json'
					: this.currentLanguage === 'yiwen'
					? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Â∂∑Êñá-ÂÆÅËøúÂπ≥ËØù/ÂÆÅËøúÂπ≥ËØùËØçÂÖ∏ÂçïËØçÂç°Áâá/ningyuanxilupinghuahuajianwen.json'
					: this.currentLanguage === 'mongolian'
					? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/ËíôÂè§Êñá-ËíôÂè§ËØ≠/ËíôÂè§ÊñáÂçïËØçÂç°/mengguword.json'
					: this.currentLanguage === 'manchu'
					? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Êª°Êñá_Êª°ÊóèËØ≠Ë®Ä/Êª°ËØ≠ÂçïËØçÂç°/manchu_words.json'
					: 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/ÂΩùÊñá-ÊªáÂçóÂè§ÂΩùÊñá/ÂΩùÊñáÂçïËØçÂç°/yiwen word.json';
			},
			
			goToWordDetail(word) {
				if (this.currentLanguage === 'nushu') {
					// ‰º†ÈÄíÂÆåÊï¥ÁöÑÊï∞ÊçÆÂØπË±°
					uni.navigateTo({
						url: `/pages/index/wordDetail?word=${encodeURIComponent(word.word)}&data=${encodeURIComponent(JSON.stringify(word.fullData))}`
					});
				} else {
					uni.navigateTo({
						url: `/pages/index/wordDetail?word=${encodeURIComponent(word.word)}`
					});
				}
			},
			async fetchArticles() {
				this.isLoading = true;
				try {
					const url = this.currentLanguage === 'nushu'
						? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Â•≥‰π¶ÊñáÁåÆÊñáÁ´†ÈõÜÂêà/Â•≥‰π¶ÊñáÁ´†/articles.json'
						: this.currentLanguage === 'hannom'
						? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Ê±âÂñÉÂ≠óË∂äÂçóËØ≠Â≠¶‰π†/Ê±âÂñÉÊñáÁ´†ÊñáÁåÆ/Ê±âÂñÉÊñáÁ´†/hannom articles.json'
						: this.currentLanguage === 'yiwen'
						? 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Â•≥‰π¶ÊñáÁåÆÊñáÁ´†ÈõÜÂêà/Â•≥‰π¶ÊñáÁ´†/articles.json'
						: 'https://mp-5f8886e4-4529-4ac6-8f2e-10ea93c64b69.cdn.bspapp.com/Â•≥‰π¶ÊñáÁåÆÊñáÁ´†ÈõÜÂêà/Â•≥‰π¶ÊñáÁ´†/articles.json';
						
					const [err, res] = await uni.request({
						url: url,
						method: 'GET'
					});
					
					if (err) {
						throw new Error('Ëé∑ÂèñÊñáÁ´†ÂàóË°®Â§±Ë¥•');
					}
					
					if (res.statusCode === 200 && res.data && res.data.articles) {
						this.articles = res.data.articles;
					} else {
						throw new Error('ÊñáÁ´†Êï∞ÊçÆÊ†ºÂºèÈîôËØØ');
					}
				} catch (error) {
					uni.showToast({
						title: 'Ëé∑ÂèñÊñáÁ´†ÂàóË°®Â§±Ë¥•',
						icon: 'none'
					});
				} finally {
					this.isLoading = false;
				}
			},
			// Ë∑≥ËΩ¨Âà∞ÊñáÁ´†ËØ¶ÊÉÖÈ°µ
			goToArticle(articleId) {
				uni.navigateTo({
					url: `/pages/read/detail?id=${articleId}`,
					fail: (err) => {
						console.error("Ë∑≥ËΩ¨ÊñáÁ´†ÈòÖËØªÈ°µÈù¢Â§±Ë¥•:", err);
						uni.showToast({
							title: 'È°µÈù¢Ë∑≥ËΩ¨Â§±Ë¥•',
							icon: 'none'
						});
					}
				});
			},
			handleSearch() {
				// Â§ÑÁêÜÊêúÁ¥¢ÈÄªËæë
			},
			
			clearSearch() {
				this.searchText = '';
			},
			
			selectCategory(categoryId) {
				this.selectedCategory = categoryId;
			},
			
			getCategoryName(categoryId) {
				const category = this.categories.find(item => item.id === categoryId);
				return category ? category.name : '';
			},
			
			// ‰øÆÊîπÂä†ËΩΩÂ§±Ë¥•Êó∂ÁöÑÂ§áÁî®Êï∞ÊçÆ
			loadFallbackData() {
				this.displayWords = [{
					word: 'Âä†ËΩΩÂ§±Ë¥•',
					pinyin: 'ËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•',
					meaning: 'Êó†Ê≥ïËé∑ÂèñÊï∞ÊçÆ',
					audio: ''
				}];
				this.allWords = [];
				this.currentPage = 0;
			},
			
			// Êñ∞Â¢ûÔºöÊªöÂä®Êó∂ÂáèÂ∞ëÂä®ÁîªÊïàÊûú
			reduceAnimationsWhileScrolling() {
				// ÊªöÂä®Êó∂‰∏¥Êó∂ÊöÇÂÅúÂºπÂπïÂä®ÁîªÊõ¥Êñ∞
				this.pauseDanmakuCreation = true;
			},
			// Êñ∞Â¢ûÔºöÊÅ¢Â§çÂä®ÁîªÊïàÊûú
			restoreAnimations() {
				// ÊªöÂä®ÁªìÊùüÂêéÊÅ¢Â§çÂºπÂπïÂàõÂª∫
				this.pauseDanmakuCreation = false;
			},
			// Êñ∞Â¢ûÊÄßËÉΩ‰ºòÂåñÂàùÂßãÂåñÊñπÊ≥ï
			initPerformanceOptimizations() {
				// Ê†πÊçÆËÆæÂ§áÊÄßËÉΩË∞ÉÊï¥Âä®ÁîªÂíåÊïàÊûú
				if (this.useReducedMotion) {
					// ÂáèÂ∞ëÂºπÂπïÊï∞Èáè
					this.danmakuTexts = this.danmakuTexts.slice(0, 10);
					
					// ËÆæÁΩÆCSSÂèòÈáè‰ª•ÂáèÂ∞ëÂä®ÁîªÊïàÊûú
					document.documentElement.style.setProperty('--reduced-motion', 'true');
				}
			},
			// ‰øÆÊîπÊ®°Êãü requestAnimationFrame ÁöÑÂ∑•ÂÖ∑ÊñπÊ≥ï
			simulateRAF(callback) {
				return setTimeout(() => {
					callback();
				}, 16); // Á∫¶60fps
			},
			// Ê∏ÖÁêÜÊñπÊ≥ï‰øùÊåÅ‰∏çÂèò
			clearSimulateRAF(id) {
				clearTimeout(id);
			},
			// Ê∑ªÂä†ËØ≠Ë®ÄÂèòÂåñÂ§ÑÁêÜÊñπÊ≥ï
			handleLanguageChange(language) {
				console.log('Language changed to:', language);
				if (language && language !== this.currentLanguage) {
					// Êõ¥Êñ∞ÂΩìÂâçËØ≠Ë®Ä
					this.currentLanguage = language;
					// ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
					uni.setStorageSync('currentLanguage', language);
					
					// ÈáçÁΩÆÊâÄÊúâÁõ∏ÂÖ≥Êï∞ÊçÆ
					this.displayWords = [];
					this.allWords = [];
					this.currentPage = 0;
					this.currentWordIndex = 0;
					
					// Êõ¥Êñ∞ËØçÊ±áURL
					this.updateVocabUrl();
					
					// ÈáçÊñ∞Ëé∑ÂèñÊï∞ÊçÆ
					this.fetchVocabData();
					
					// ÈáçÊñ∞Ëé∑ÂèñÊñáÁ´†Êï∞ÊçÆ
					this.fetchArticles();
					
					// È¢ÑÂä†ËΩΩÂ≠ó‰Ωì
					this.preloadFont();
				}
			},
			
			truncateText(text) {
				if (!text) return '';
				if (this.currentLanguage === 'mongolian' || this.currentLanguage === 'manchu') {
					return text.length > 20 ? text.slice(0, 20) + '...' : text;
				}
				return text;
			},
		}
	}
</script>

<style lang="scss">
.page-container {
	flex: 1;
	background-color: #FFFFFF;
	position: relative;
	height: 100vh;
	will-change: transform;
	transform: translateZ(0);
}

.ios-background {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 1;
	background-color: #FFFFFF;
}

.ios-gradient-bg {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 300rpx;
	background: #FFFFFF;
	z-index: 1;
}

.ios-status-bar {
	height: var(--status-bar-height);
	width: 100%;
}

.ios-scroll-container {
	flex: 1;
	height: calc(100vh - var(--status-bar-height));
	position: relative;
	z-index: 10;
	-webkit-overflow-scrolling: touch;
	will-change: transform;
	transform: translateZ(0);
	background-color: #FFFFFF;
}

.ios-nav-header {
	padding: 10rpx 32rpx;
	display: flex;
	justify-content: space-between;
	align-items: center;
	height: 60rpx;
	animation: slideInDown 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	opacity: 0;
	transform: translateZ(0);
}

.ios-header-left {
	width: 60rpx;
	height: 60rpx;
	display: flex;
	align-items: center;
	justify-content: center;
}

.ios-header-right {
	display: flex;
	align-items: center;
	gap: 20rpx;
}

.ios-icon-button {
	width: 60rpx;
	height: 60rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 30rpx;
}

.ios-icon {
	font-size: 40rpx;
	color: #1a3263;
}

.ios-word-swiper {
	height: 620rpx;
	width: 100%;
	margin-top: 0;
	margin-bottom: 6rpx;
	animation: fadeIn 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	animation-delay: 0.1s;
	opacity: 0;
	transform: translateZ(0);
	padding: 10rpx 0;
	will-change: transform;
	backface-visibility: hidden;
}

.ios-card {
	margin: 0 10rpx;
	background-color: #FFFFFF;
	border-radius: 20rpx;
	box-shadow: 0 8rpx 20rpx rgba(26, 50, 99, 0.15);
	padding: 30rpx;
	height: auto;
	display: flex;
	flex-direction: column;
	position: relative;
	transition: transform 0.2s ease;
	will-change: transform;
	transform: translateZ(0);
	opacity: 0;
	animation: fadeInUp 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	animation-delay: 0.2s;
	cursor: pointer;
	overflow: hidden;
}

.ios-card:active {
	transform: scale(0.98) translateZ(0);
	background-color: rgba(26, 50, 99, 0.02);
}

.ios-loading-card {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
}

.ios-loading-indicator {
	width: 40rpx;
	height: 40rpx;
	border-radius: 20rpx;
	border: 4rpx solid rgba(26, 50, 99, 0.2);
	border-top-color: #1a3263;
	animation: ios-spin 1s infinite linear;
}

@keyframes ios-spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.ios-loading-text {
	margin-top: 20rpx;
	font-size: 28rpx;
	color: #1a3263;
}

.ios-card-content {
	flex: 1;
	display: flex;
	flex-direction: column;
	gap: 8rpx;
	overflow: hidden;
}

.ios-card-header {
	display: flex;
	justify-content: flex-start;
	margin-bottom: 16rpx;
	min-height: 100rpx;
}

.ios-word-character {
	font-family: 'Diannanguyiwen', 'Yiwen', 'Nushu', 'Hannom', sans-serif;
	font-size: 90rpx;
	font-weight: 600;
	color: #1a3263;
	line-height: 1.3;
	text-align: left;
	word-break: keep-all;
	white-space: pre-line;
	overflow-wrap: break-word;
	line-break: strict;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

.ios-word-pinyin-box {
	margin-bottom: 4rpx;
	background: rgba(26,50,99,0.03);
	border-radius: 10rpx;
	padding: 6rpx 10rpx;
	max-height: 80rpx;
	overflow: hidden;
}

.ios-word-pinyin {
	font-size: 28rpx;
	color: #3a5a8c;
	margin-bottom: 16rpx;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	overflow: hidden;
	text-overflow: ellipsis;
	word-break: break-all;
	white-space: pre-line;
}

.ios-word-meaning-box {
	background: rgba(26,50,99,0.06);
	border-radius: 10rpx;
	padding: 16rpx 20rpx;
	max-height: 340rpx;
	overflow: hidden;
}

.ios-word-meaning {
	font-size: 32rpx;
	color: #1a3263;
	line-height: 1.8;
	text-align: left;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	overflow: hidden;
	text-overflow: ellipsis;
	word-break: break-word;
	white-space: pre-line;
}

.ios-word-meaning-box::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 60rpx;
	background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.9) 100%);
	pointer-events: none;
}

.ios-word-long {
	font-size: 72rpx;
	line-height: 1.2;
}

.ios-word-very-long {
	font-size: 60rpx;
	line-height: 1.1;
}

.ios-expand-btn {
	position: absolute;
	bottom: 20rpx;
	right: 20rpx;
	padding: 8rpx 16rpx;
	background: rgba(26, 50, 99, 0.1);
	border-radius: 20rpx;
	font-size: 24rpx;
	color: #1a3263;
	z-index: 2;
}

.ios-expand-btn:active {
	background: rgba(26, 50, 99, 0.2);
}

.ios-audio-button {
	position: absolute;
	top: 28rpx;
	right: 28rpx;
	width: 70rpx;
	height: 70rpx;
	border-radius: 35rpx;
	background-color: #1a3263;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 4rpx 12rpx rgba(26, 50, 99, 0.3);
	transition: transform 0.2s ease;
	z-index: 10;
	transform: translateZ(0);
}

.ios-audio-button:active {
	transform: scale(0.9);
}

.ios-audio-icon {
	width: 32rpx;
	height: 32rpx;
	background-image: url('../../static/icon/sound-svgrepo-com.svg');
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center;
	transform: translateZ(0);
	transition: transform 0.3s ease;
}

.ios-audio-playing {
	animation: audio-rotate 2s infinite linear;
}

@keyframes audio-rotate {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.ios-menu-section, .ios-list-section {
	margin: 0 32rpx;
	margin-top: 0;
	background-color: #FFFFFF;
}

.ios-section-header {
	display: flex;
	justify-content: flex-start;
	align-items: center;
	margin-bottom: 24rpx;
}

.ios-section-title {
	font-size: 36rpx;
	font-weight: 600;
	color: #1a3263;
}

.ios-section-action {
	font-size: 28rpx;
	color: #1a3263;
	font-weight: 500;
}

.ios-grid {
	display: flex;
	flex-wrap: wrap;
	margin: 0 -12rpx;
	will-change: transform;
	transform: translateZ(0);
	animation: fadeIn 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	animation-delay: 0.3s;
	opacity: 0;
}

.ios-grid-item {
	width: 25%;
	padding: 16rpx;
	display: flex;
	flex-direction: column;
	align-items: center;
	animation: fadeInUp 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	opacity: 0;
	animation-delay: calc(0.3s + var(--index, 0) * 0.05s);
	transform: translateZ(0);
	position: relative;
}

.ios-grid-item:active .ios-grid-icon-container {
	transform: scale(0.92);
	box-shadow: 0 2rpx 5rpx rgba(26, 50, 99, 0.1);
}

.ios-grid-icon-container {
	width: 130rpx;
	height: 130rpx;
	border-radius: 30rpx;
	background-color: #FFFFFF;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-bottom: 16rpx;
	box-shadow: 0 4rpx 12rpx rgba(26, 50, 99, 0.15);
	transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.ios-grid-icon {
	width: 65rpx;
	height: 65rpx;
	/* filter: invert(15%) sepia(30%) saturate(1200%) hue-rotate(200deg) brightness(90%) contrast(95%); */
	will-change: transform;
	transform: translateZ(0);
	backface-visibility: hidden;
}

.ios-grid-label {
	font-size: 28rpx;
	color: #1a3263;
	text-align: center;
	font-weight: 500;
	margin-top: 4rpx;
}

.ios-list {
	background-color: #FFFFFF;
	border-radius: 16rpx;
	overflow: hidden;
	box-shadow: 0 2rpx 10rpx rgba(26, 50, 99, 0.1);
	animation: fadeIn 0.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	animation-delay: 0.4s;
	opacity: 0;
	transform: translateZ(0);
}

.ios-list-item {
	padding: 24rpx;
	display: flex;
	align-items: center;
	border-bottom: 1rpx solid #E5E5EA;
	animation: fadeInUp 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	opacity: 0;
	animation-delay: calc(0.4s + var(--index, 0) * 0.05s);
	transform: translateZ(0);
	will-change: transform;
}

.ios-list-item:last-child {
	border-bottom: none;
}

.ios-list-icon {
	width: 80rpx;
	height: 80rpx;
	border-radius: 16rpx;
	background-color: rgba(26, 50, 99, 0.05);
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 20rpx;
}

.ios-list-icon image {
	width: 40rpx;
	height: 40rpx;
	/* filter: invert(15%) sepia(30%) saturate(1200%) hue-rotate(200deg) brightness(90%) contrast(95%); */
	will-change: transform;
	transform: translateZ(0);
	backface-visibility: hidden;
}

.ios-list-content {
	flex: 1;
}

.ios-list-title {
	font-size: 32rpx;
	font-weight: 500;
	color: #1a3263;
	margin-bottom: 4rpx;
}

.ios-list-subtitle {
	font-size: 26rpx;
	color: #4a6fa5;
}

.ios-chevron {
	width: 30rpx;
	height: 30rpx;
	position: relative;
}

.ios-chevron:after {
	content: '';
	position: absolute;
	width: 16rpx;
	height: 16rpx;
	border-top: 2rpx solid #1a3263;
	border-right: 2rpx solid #1a3263;
	transform: rotate(45deg);
	top: 7rpx;
	left: 0;
}

.ios-load-more, .ios-no-more-data {
	padding: 32rpx;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.ios-loading-dots {
	display: flex;
	margin-bottom: 12rpx;
}

.ios-loading-dot {
	width: 12rpx;
	height: 12rpx;
	border-radius: 6rpx;
	background-color: #4a6fa5;
	margin: 0 4rpx;
	animation: dot-pulse 1.5s infinite ease-in-out;
}

.ios-loading-dot:nth-child(2) {
	animation-delay: 0.2s;
}

.ios-loading-dot:nth-child(3) {
	animation-delay: 0.4s;
}

@keyframes dot-pulse {
	0%, 80%, 100% { transform: scale(0.8); opacity: 0.6; }
	40% { transform: scale(1.2); opacity: 1; }
}

.ios-load-text, .ios-no-more-data text {
	font-size: 26rpx;
	color: #4a6fa5;
}

.ios-safe-area-bottom {
	height: 34rpx;
}

.ios-back-to-top {
	position: fixed;
	bottom: 80rpx;
	right: 30rpx;
	width: 80rpx;
	height: 80rpx;
	border-radius: 40rpx;
	background-color: rgba(26, 50, 99, 0.8);
	box-shadow: 0 4rpx 16rpx rgba(26, 50, 99, 0.2);
	display: flex;
	align-items: center;
	justify-content: center;
	opacity: 0;
	transform: translateY(30rpx);
	transition: opacity 0.3s, transform 0.3s;
	z-index: 100;
	will-change: transform, opacity;
}

.ios-back-to-top-icon {
	width: 30rpx;
	height: 30rpx;
	position: relative;
}

.ios-back-to-top-icon:after {
	content: '';
	position: absolute;
	width: 20rpx;
	height: 20rpx;
	border-top: 3rpx solid #FFFFFF;
	border-left: 3rpx solid #FFFFFF;
	transform: rotate(45deg);
	top: 10rpx;
	left: 5rpx;
}

.ios-visible {
	opacity: 1;
	transform: translateY(0);
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(10px) translateZ(0);
	}
	to {
		opacity: 1;
		transform: translateY(0) translateZ(0);
	}
}

@keyframes slideInDown {
	from {
		opacity: 0;
		transform: translateY(-20px) translateZ(0);
	}
	to {
		opacity: 1;
		transform: translateY(0) translateZ(0);
	}
}

.ios-card {
	animation: fadeInUp 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
	animation-delay: 0.2s;
	opacity: 0;
	transform: translateZ(0);
	transition: transform 0.15s ease;
}

.ios-card:active {
	animation: none;
	transform: scale(0.98) translateZ(0);
}

.swiper-item {
	display: flex;
	justify-content: center;
	align-items: center;
	transition: all 0.3s ease;
}

.swiper-item-active {
	transform: scale(1);
}

.ios-card-active {
	transform: translateZ(0) scale(1);
	box-shadow: 0 12rpx 28rpx rgba(26, 50, 99, 0.2);
	z-index: 2;
}

.uni-swiper-wrapper .uni-swiper-slide {
	transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
	transform: scale(0.85);
}

.uni-swiper-wrapper .uni-swiper-slide-active {
	transform: scale(1);
	z-index: 2;
}

.ios-audio-button {
	position: absolute;
	top: 28rpx;
	right: 28rpx;
	width: 70rpx;
	height: 70rpx;
	border-radius: 35rpx;
	background-color: #1a3263;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: 0 4rpx 12rpx rgba(26, 50, 99, 0.3);
	transition: transform 0.2s ease;
	z-index: 10;
}

.ios-audio-button:active {
	transform: scale(0.9);
}

.ios-audio-icon {
	width: 32rpx;
	height: 32rpx;
	background-image: url('../../static/icon/sound-svgrepo-com.svg');
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center;
	transform: translateZ(0);
	transition: transform 0.3s ease;
}

.ios-audio-playing {
	animation: audio-rotate 2s infinite linear;
}

@keyframes audio-rotate {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.ios-language-button {
	width: 60rpx;
	height: 60rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 30rpx;
	background-color: rgba(26, 50, 99, 0.05);
	transition: background-color 0.2s ease;
}

.ios-language-button:active {
	background-color: rgba(26, 50, 99, 0.1);
}

.ios-language-button image {
	width: 36rpx;
	height: 36rpx;
	filter: none !important;
}

.detail-btn-container {
	display: flex;
	justify-content: flex-start;
	margin: 16rpx 0 0 0;
}

.detail-btn {
	padding: 16rpx 48rpx;
	background: linear-gradient(135deg, #1a3263, #2a4a8c);
	color: #fff;
	border-radius: 32rpx;
	box-shadow: 0 4rpx 12rpx rgba(26, 50, 99, 0.2);
	transition: all 0.3s ease;
}

.detail-btn:active {
	transform: scale(0.95);
	background: linear-gradient(135deg, #2a4a8c, #1a3263);
	box-shadow: 0 2rpx 6rpx rgba(26, 50, 99, 0.15);
}

.detail-text {
	font-size: 32rpx;
	color: #fff;
	font-weight: 600;
	letter-spacing: 1rpx;
}

.article-section {
	margin: 32rpx;
	margin-bottom: 48rpx;
	background-color: #FFFFFF;
}

.section-header {
	display: flex;
	justify-content: flex-start;
	align-items: center;
	margin-bottom: 24rpx;
}

.section-title {
	font-size: 36rpx;
	font-weight: 600;
	color: #1a3263;
	letter-spacing: 1rpx;
}

.more-link {
	display: flex;
	align-items: center;
	padding: 12rpx 0;
}

.more-link text {
	font-size: 28rpx;
	color: #1a3263;
	opacity: 0.8;
}

.arrow-icon {
	width: 24rpx;
	height: 24rpx;
	position: relative;
	margin-left: 8rpx;
}

.arrow-icon::after {
	content: '';
	position: absolute;
	width: 12rpx;
	height: 12rpx;
	border-top: 2rpx solid #1a3263;
	border-right: 2rpx solid #1a3263;
	transform: rotate(45deg);
	top: 6rpx;
	left: 0;
	opacity: 0.8;
}

.article-list {
	margin-top: 16rpx;
}

.article-item {
	display: flex;
	align-items: flex-start;
	padding: 24rpx 0;
	border-bottom: 1rpx solid rgba(26, 50, 99, 0.08);
}

.article-item:last-child {
	border-bottom: none;
}

.article-avatar {
	width: 80rpx;
	height: 80rpx;
	border-radius: 16rpx;
	background: #1a3263;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 24rpx;
}

.article-avatar text {
	color: #FFFFFF;
	font-size: 32rpx;
	font-weight: 500;
}

.article-content {
	flex: 1;
}

.article-title {
	font-size: 32rpx;
	font-weight: 600;
	color: #1a3263;
	margin-bottom: 8rpx;
	line-height: 1.4;
}

.article-description {
	font-size: 26rpx;
	color: #3A3A3C;
	line-height: 1.5;
	opacity: 0.8;
}

.loading-state {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 40rpx 0;
}

.loading-spinner {
	width: 40rpx;
	height: 40rpx;
	border: 3rpx solid rgba(26, 50, 99, 0.1);
	border-top-color: #1a3263;
	border-radius: 50%;
	animation: spin 1s infinite linear;
	margin-bottom: 16rpx;
}

@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.loading-state text {
	font-size: 26rpx;
	color: #1a3263;
	opacity: 0.6;
}

.search-bar {
	margin-bottom: 32rpx;
}

.search-input {
	height: 88rpx;
	background-color: rgba(26, 50, 99, 0.05);
	border-radius: 16rpx;
	display: flex;
	align-items: center;
	padding: 0 28rpx;
	transition: all 0.3s;
}

.search-input:active {
	background-color: rgba(26, 50, 99, 0.08);
}

.search-icon {
	width: 56rpx;
	height: 56rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 20rpx;
	opacity: 0.7;
}

.search-icon image {
	width: 100%;
	height: 100%;
}

.search-input input {
	flex: 1;
	height: 88rpx;
	font-size: 32rpx;
	color: #1a3263;
}

.search-clear {
	width: 40rpx;
	height: 40rpx;
	background-color: rgba(142, 142, 147, 0.3);
	border-radius: 20rpx;
	position: relative;
	transition: all 0.2s;
}

.search-clear:active {
	transform: scale(0.9);
	background-color: rgba(142, 142, 147, 0.5);
}

.search-clear::before, .search-clear::after {
	content: '';
	position: absolute;
	width: 24rpx;
	height: 2rpx;
	background-color: #FFFFFF;
	top: 50%;
	left: 50%;
}

.search-clear::before {
	transform: translate(-50%, -50%) rotate(45deg);
}

.search-clear::after {
	transform: translate(-50%, -50%) rotate(-45deg);
}

.no-results {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 100rpx 0;
}

.no-results-icon {
	width: 120rpx;
	height: 120rpx;
	margin-bottom: 24rpx;
	opacity: 0.4;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 100rpx;
	color: #1a3263;
}

.no-results-icon::before {
	content: "\e60c";
	font-family: "uniicons";
}

.no-results text {
	font-size: 30rpx;
	color: #1a3263;
	opacity: 0.6;
	letter-spacing: 2rpx;
}

.article-footer {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-top: 12rpx;
}

.article-author {
	font-size: 26rpx;
	color: #1a3263;
	font-weight: 500;
	opacity: 0.8;
}

.article-date {
	font-size: 24rpx;
	color: #8E8E93;
}

.vertical-mongolian {
  writing-mode: vertical-lr !important;
  text-orientation: mixed;
  font-family: 'MengguWen', 'Noto Sans Mongolian', 'Mongolian Baiti', sans-serif !important;
  letter-spacing: 2px;
  line-height: 1.2;
  display: block !important;
  margin-left: 0;
  margin-right: auto;
  text-align: left;
  height: auto !important;
  min-height: 0 !important;
  white-space: normal !important;
  overflow: visible !important;
}

/* Add specific styles for Manchu text */
.vertical-mongolian[data-language="manchu"] {
  writing-mode: vertical-lr !important; /* Attempt vertical rendering */
  text-orientation: mixed;
  font-family: 'system-ui', sans-serif !important;
  letter-spacing: normal;
  line-height: 1.5;
  text-align: left;
  white-space: normal;
  overflow: visible;
}

.vertical-mongolian-pinyin {
  writing-mode: vertical-lr !important;
  text-orientation: sideways !important;
  font-family: 'Arial', 'Noto Sans Mongolian', sans-serif !important;
  letter-spacing: 2px !important;
  line-height: 1.2 !important;
  display: block !important;
  width: auto !important;
  min-height: 0 !important;
  white-space: nowrap !important;
  margin: 0 !important;
  padding: 0 1px !important;
  background: none !important;
  border-radius: 0 !important;
  font-size: 16px !important;
  color: #1a3263 !important;
  align-self: flex-start !important;
  overflow: visible !important;
  text-align: center !important;
  max-height: none !important;
}

.vertical-mongolian-chinese {
  display: block;
  width: auto;
  min-height: 80px;
  white-space: normal;
  margin: 0 auto;
  padding: 0 2px;
  box-sizing: border-box;
  background: none;
  border-radius: 0;
  font-size: 18px;
  align-self: flex-end;
}

@font-face {
  font-family: 'MengguWen';
  src: url('/static/fonts/mengguwen.ttf') format('truetype');
  font-display: swap;
  font-weight: normal;
  font-style: normal;
}

.mongolian-card-content {
  display: flex !important;
  flex-direction: row !important;
  align-items: flex-start !important;
  overflow: visible !important;
  height: auto !important;
}

.ios-card-header {
  margin-bottom: 0 !important;
  margin-right: 8px !important;
  height: auto !important;
  min-height: 0 !important;
}
</style>

<style>
@font-face {
	font-family: 'Nushu';
	src: url('/static/fonts/Nushu.ttf') format('truetype');
	font-display: swap;
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Hannom';
	src: url('/static/fonts/NOMNATONG-REGULAR.TTF') format('truetype');
	font-display: swap;
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Yiwen';
	src: url('/static/fonts/Yiwen.ttf') format('truetype');
	font-display: swap;
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'Diannanguyiwen';
	src: url('/static/fonts/diannanguyiwen.ttf') format('truetype');
	font-display: swap;
	font-weight: normal;
	font-style: normal;
}
</style>
